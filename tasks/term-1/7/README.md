# Лабораторная работа 7: Параллельное умножение матриц (Java)

## Цель работы
Реализовать функции для умножения матриц:

1. `public static double[][] multiply(double[][] firstMatrix, double[][] secondMatrix)` — однопоточная реализация;
2. `public static double[][] multiplyParallel(double[][] firstMatrix, double[][] secondMatrix)` — многопоточная реализация.

Сравнить время выполнения на матрицах большой размерности и подобрать оптимальное количество потоков для вашей платформы.

---

## Реализация многопоточности
- Используется `ExecutorService` с фиксированным числом потоков.
- Каждому потоку назначается диапазон строк первой матрицы для перемножения с транспонированной второй матрицей.
- Для ожидания завершения всех потоков используется `Future.get()`.

---

## Подбор оптимального количества потоков
**Платформа:** AMD Ryzen 5 4600H (6 физических ядер, 12 логических потоков).

**Подход к подбору потоков:**

1. Для **малых матриц (< 2000 строк)** используется метод `calculateOptimalThreads(size)`, который:
    - создаёт случайные матрицы нужного размера;
    - выполняет прогревочные прогонки перед измерением;
    - тестирует все числа потоков от 1 до `2 × availableProcessors()`;
    - выбирает число потоков с наименьшим средним временем.

2. Для **больших матриц (≥ 2000 строк)** используется число потоков, равное числу логических процессоров:
   ```java
   Runtime.getRuntime().availableProcessors()
## Особенности
- Для очень маленьких матриц (< 500 строк) количество оптимальных потоков нестабильно из-за накладных расходов на создание и распределение задач.
- Для средних и больших матриц параллельная реализация значительно ускоряет вычисления.
## Результаты измерений
| Размер матрицы  | Однопоточная реализация | Многопоточная реализация | Оптимальное число потоков |
|-----------------|-------------------------|--------------------------|---------------------------|
| 100 x 100       | 1.16 ms                 | 0.14 ms                  | 21                        |
| 500 x 500       | 82.25 ms                | 8.52 ms                  | 24                        |
| 1000 x 1000     | 721.59 ms               | 66.40 ms                 | 24                        |
| 2000 x 2000     | 5613.42 ms              | 834.65 ms                | 12                        |
## Вывод
Параллельное умножение обеспечивает значительное ускорение, особенно на больших матрицах.