## HSAI 25-26 Java course - 1
____
### 7. Java: Parallel matrix multiplication
- Реализовать функцию ```public static double[][] multiplyParallel(double[][] firstMatrix, double[][] secondMatrix)``` с использованием многопоточности;
- Реализовать функцию ```public static double[][] multiply(double[][] firstMatrix, double[][] secondMatrix)```;
- Сравнить время с однопоточной реализацией из лабораторной 1;
- Подобрать оптимальное количество потоков под вашу платформу, описать подход к подбору в README.
### Подбор оптимального количества потоков
Работа выполнялась на процессоре AMD Ryzen 5 4600H, который имеет 6 физических ядер и 12 логических потоков.

Количество потоков подбирается в зависимости от размера матриц:
- Для матриц небольшого размера (< 2000 строк) используется метод `calculateOptimalThreads(size)`, который:
  - создаёт случайные матрицы нужного размера;
  - перед тестированием "прогревается";
  - тестирует разные числа потоков (от 1 до `2 ⋅ availableProcessors()`);
  - выполняет несколько прогонов на каждом варианте и выбирает число потоков с наименьшим средним временем.
- Для больших матриц (>= 2000 строк) используется число логических процессоров `Runtime.getRuntime().availableProcessors()`.

Для маленьких матриц (< 500 строк) количество оптимальных потоков неустойчиво, так как часто накладные расходы на создание и распределение задач превышают выгоду от параллелизма. 


| Размер | Однопоточный | Многопоточный | Количество потоков |
|:----------------:|:---------:|:----------------:|:----------------:|
| 100 x 100 | 1.36 ms  | 0.25 ms | 3 |
| 500 x 500 | 92.15 ms |  11.38 ms | 11 |
| 1000 x 1000 | 820.39 ms | 105.38 ms | 11 |
| 2000 x 2000 | 6713.46 ms | 1156.68 ms | 12 |
