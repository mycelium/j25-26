# Параллельное умножение матриц

## Детали реализации
Класс `MatrixMultPar` предоставляет метод `multiplyParallel`.
- **Подход**: Строки результирующей матрицы распределяются между доступными потоками. Каждый поток отвечает за вычисление определенного диапазона строк.
- **Алгоритм**: Во внутренних циклах используется порядок `(k, i, j)` (итерация по общему измерению `k` во внешнем цикле внутри чанка потока). Это позволяет эффективно обращаться к строкам второй матрицы (`secondMatrix[k]`), что эффективно использует кэш в Java.
- **Управление потоками**: Потоки создаются вручную с использованием `java.lang.Thread` (передавая `Runnable` в конструктор).

## Запуск и использование
Для запуска лабораторной работы не требуется ручной ввод данных (Scanner и т.д.).
1. Скомпилировать:
   ```bash
   javac MatrixMultPar.java
   ```
2. Запустить:
   ```bash
   java MatrixMultPar
   ```
   Программа автоматически сгенерирует матрицы, выполнит умножение и выведет результаты бенчмарка в консоль.

## Тестирование производительности и оптимизация
Метод `main` в `MatrixMultPar` запускает тест, сравнивающий однопоточную реализацию (из Лаб 1) с параллельной реализацией при различном количестве потоков.

### Результаты (Пример)
Размер матрицы: 1000x1000

| Конфигурация | Время (мс) |
|--------------|------------|
| Однопоточная | ~567 |
| Параллельная (1 поток) | ~1363 |
| Параллельная (2 потока) | ~805 |
| Параллельная (4 потока) | ~149 |
| Параллельная (8 потоков) | ~100 |
| Параллельная (16 потоков) | ~83 |

*Примечание: Параллельная версия с 1 потоком медленнее из-за накладных расходов на создание потока и контекста JIT-оптимизации по сравнению с простым статическим методом. Однако масштабируемость очевидна.*

Производительность значительно улучшается до достижения количества физических/логических ядер. Для данной машины оптимальное количество потоков составляет около **8-16**, где время выполнения выходит на плато. Добавление большего количества потоков сверх этого приводит к уменьшению эффективности из-за накладных расходов на переключение контекста.

## Запуск тестов

Для запуска всех тестов выполните:
```bash
./gradlew clean test
```
 
Для сравнения умножений используется библиотека Apache Commons Math (добавлена в build.gradle).

Тесты находятся в `MatrixMultParTest.java` и включают:
- Базовое умножение матриц (2×2, 3×3, неквадратные)
- Различное количество потоков (1, 2, 4, 8, больше чем строк)
- Специальные матрицы (единичная, нулевая, 1×1)
- Численные граничные случаи (отрицательные, дробные, большие числа)
- Обработку ошибок (null, пустые, несовместимые размерности)
- Сравнение параллельной и однопоточной версий
- Тесты производительности (до 1000×1000)
